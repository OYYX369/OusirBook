/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css              *//* empty css               *//* empty css               *//* empty css                     *//* empty css                   *//* empty css                */import{r as c}from"./request-7c157a8d.js";import{r as B,o as f,c as _,d as g,e as o,w as a,h as I,s as M,z as L,D as P,G as F,H as O,n as r,F as J,B as T,g as $,I as A,E as p,J as G,L as q,M as H,v as j,N as K,O as Q,m as R}from"./index-4e65b77a.js";const W={class:"card",style:{"margin-bottom":"5px"}},X={class:"card",style:{"margin-bottom":"5px"}},Z={style:{"margin-bottom":"10px"}},ee={key:0,class:"card"},oe={class:"dialog-footer"},ge={__name:"GoodsStock",setup(te){const e=B({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],goodsName:null,goodsList:[]});c.get("/goods/selectAll").then(n=>{e.goodsList=n.data});const m=()=>{c.get("/goodsStock/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,goodsName:e.goodsName}}).then(n=>{var t,s;e.tableData=(t=n.data)==null?void 0:t.list,e.total=(s=n.data)==null?void 0:s.total})},b=()=>{e.form={},e.formVisible=!0},V=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},y=()=>{c.post("/goodsStock/add",e.form).then(n=>{n.code==="200"?(m(),p.success("操作成功"),e.formVisible=!1):p.error(n.msg)})},k=()=>{c.put("/goodsStock/update",e.form).then(n=>{n.code==="200"?(m(),p.success("操作成功"),e.formVisible=!1):p.error(n.msg)})},N=()=>{e.form.id?k():y()},E=n=>{A.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(t=>{c.delete("/goodsStock/delete/"+n).then(s=>{s.code==="200"?(m(),p.success("操作成功")):p.error(s.msg)})}).catch(t=>{})},h=()=>{e.goodsName=null,m()};return m(),(n,t)=>{const s=M,d=L,i=G,v=P,x=F,S=q,C=H,u=j,w=K,D=Q,z=R,U=O;return f(),_("div",null,[g("div",W,[o(s,{modelValue:e.goodsName,"onUpdate:modelValue":t[0]||(t[0]=l=>e.goodsName=l),style:{width:"300px","margin-right":"10px"},placeholder:"请输入农产品名称查询"},null,8,["modelValue"]),o(d,{type:"primary",onClick:m},{default:a(()=>[r("查询")]),_:1}),o(d,{type:"info",style:{margin:"0 10px"},onClick:h},{default:a(()=>[r("重置")]),_:1})]),g("div",X,[g("div",Z,[o(d,{type:"primary",onClick:b},{default:a(()=>[r("新增")]),_:1})]),o(v,{data:e.tableData,stripe:""},{default:a(()=>[o(i,{label:"农产品名称",prop:"goodsName"}),o(i,{label:"进货数量",prop:"num"}),o(i,{label:"进货渠道",prop:"channel"}),o(i,{label:"进货日期",prop:"date"}),o(i,{label:"备注",prop:"comment"}),o(i,{label:"操作","header-align":"center",width:"160"},{default:a(l=>[o(d,{type:"primary",onClick:Y=>V(l.row)},{default:a(()=>[r("编辑")]),_:2},1032,["onClick"]),o(d,{type:"danger",onClick:Y=>E(l.row.id)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(f(),_("div",ee,[o(x,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":t[1]||(t[1]=l=>e.pageSize=l),"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])])):I("",!0),o(U,{title:"进货信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":t[9]||(t[9]=l=>e.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[g("span",oe,[o(d,{onClick:t[8]||(t[8]=l=>e.formVisible=!1)},{default:a(()=>[r("取 消")]),_:1}),o(d,{type:"primary",onClick:N},{default:a(()=>[r("保 存")]),_:1})])]),default:a(()=>[o(z,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[o(u,{label:"农产品",prop:"goodsId"},{default:a(()=>[o(C,{modelValue:e.form.goodsId,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.goodsId=l),placeholder:"请选择农产品",style:{width:"100%"}},{default:a(()=>[(f(!0),_(J,null,T(e.goodsList,l=>(f(),$(S,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"进货数量"},{default:a(()=>[o(w,{min:1,modelValue:e.form.num,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.num=l)},null,8,["modelValue"])]),_:1}),o(u,{label:"进货渠道"},{default:a(()=>[o(s,{modelValue:e.form.channel,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.channel=l),placeholder:"请输入进货渠道"},null,8,["modelValue"])]),_:1}),o(u,{label:"进货日期"},{default:a(()=>[o(D,{style:{width:"100%"},type:"date",modelValue:e.form.date,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.date=l),placeholder:"请选择进货日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),o(u,{label:"备注"},{default:a(()=>[o(s,{modelValue:e.form.comment,"onUpdate:modelValue":t[7]||(t[7]=l=>e.form.comment=l),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ge as default};
