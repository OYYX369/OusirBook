/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                     */import{r as c}from"./request-7c157a8d.js";import{r as B,o as _,c as g,d as u,e as t,w as l,s as A,z as J,D as M,G as P,H as T,n as m,h as $,I as q,E as d,J as F,K as O,q as G,v as H,m as K}from"./index-4e65b77a.js";const j={class:"card",style:{"margin-bottom":"5px"}},L={class:"card",style:{"margin-bottom":"5px"}},Q={style:{"margin-bottom":"10px"}},R={key:0},W={class:"card"},X={class:"dialog-footer"},ue={__name:"Admin",setup(Y){const b="http://:9090/files/upload",e=B({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null}),i=()=>{c.get("/admin/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(n=>{var a,s;e.tableData=(a=n.data)==null?void 0:a.list,e.total=(s=n.data)==null?void 0:s.total})},y=()=>{e.form={},e.formVisible=!0},V=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},h=()=>{c.post("/admin/add",e.form).then(n=>{n.code==="200"?(i(),d.success("操作成功"),e.formVisible=!1):d.error(n.msg)})},x=()=>{c.put("/admin/update",e.form).then(n=>{n.code==="200"?(i(),d.success("操作成功"),e.formVisible=!1):d.error(n.msg)})},v=()=>{e.form.id?x():h()},E=n=>{q.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(a=>{c.delete("/admin/delete/"+n).then(s=>{s.code==="200"?(i(),d.success("操作成功")):d.error(s.msg)})}).catch(a=>{})},k=()=>{e.name=null,i()},w=n=>{e.form.avatar=n.data};return i(),(n,a)=>{const s=A,r=J,p=F,C=O,N=M,z=P,S=G,f=H,U=K,D=T;return _(),g("div",null,[u("div",j,[t(s,{modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.name=o),style:{width:"300px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),t(r,{type:"primary",onClick:i},{default:l(()=>[m("查询")]),_:1}),t(r,{type:"info",style:{margin:"0 10px"},onClick:k},{default:l(()=>[m("重置")]),_:1})]),u("div",L,[u("div",Q,[t(r,{type:"primary",onClick:y},{default:l(()=>[m("新增")]),_:1})]),t(N,{data:e.tableData,stripe:""},{default:l(()=>[t(p,{label:"用户名",prop:"username"}),t(p,{label:"名称",prop:"name"}),t(p,{label:"头像"},{default:l(o=>[t(C,{src:o.row.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),_:1}),t(p,{label:"角色",prop:"role"},{default:l(o=>[o.row.role==="ADMIN"?(_(),g("span",R,"管理员")):$("",!0)]),_:1}),t(p,{label:"操作",align:"center",width:"160"},{default:l(o=>[t(r,{type:"primary",onClick:I=>V(o.row)},{default:l(()=>[m("编辑")]),_:2},1032,["onClick"]),t(r,{type:"danger",onClick:I=>E(o.row.id)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",W,[t(z,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":a[1]||(a[1]=o=>e.pageSize=o),"current-page":e.pageNum,"onUpdate:currentPage":a[2]||(a[2]=o=>e.pageNum=o),total:e.total},null,8,["page-size","current-page","total"])]),t(D,{title:"信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":a[6]||(a[6]=o=>e.formVisible=o),"close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[u("span",X,[t(r,{onClick:a[5]||(a[5]=o=>e.formVisible=!1)},{default:l(()=>[m("取 消")]),_:1}),t(r,{type:"primary",onClick:v},{default:l(()=>[m("保 存")]),_:1})])]),default:l(()=>[t(U,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:l(()=>[t(f,{label:"头像",prop:"avatar"},{default:l(()=>[t(S,{action:b,"list-type":"picture","on-success":w},{default:l(()=>[t(r,{type:"primary"},{default:l(()=>[m("上传图片")]),_:1})]),_:1})]),_:1}),t(f,{label:"账号",prop:"username"},{default:l(()=>[t(s,{modelValue:e.form.username,"onUpdate:modelValue":a[3]||(a[3]=o=>e.form.username=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(f,{label:"名称",prop:"name"},{default:l(()=>[t(s,{modelValue:e.form.name,"onUpdate:modelValue":a[4]||(a[4]=o=>e.form.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ue as default};
